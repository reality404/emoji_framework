<html>
<head>
  <meta charset="utf-8">
<style>
  body{
    margin: 0 auto;
    overflow: hidden;
    /*background-color: black;*/
  }

  #container {
    width: 100%;
    height: 100%;
    position: relative;
}
</style>
</head>
<body>

<div id="container"></div>

<script>

  const container = document.getElementById("container");

  const canvas = document.createElement('canvas');  
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  canvas.classList.add("canvas");
  canvas.style.position = "absolute"; 
  canvas.style.zIndex = "+2"; 
  container.appendChild(canvas);           
  const ctx = canvas.getContext('2d');

  const canvasO = document.createElement('canvas');
  canvasO.width = "130";
  canvasO.height = "130";
  const ctxO = canvasO.getContext('2d');

  //work out the border of the emoji
  let bound = {     
      top: null,
      left: null,
      right: null,
      bottom: null
    },boundX,boundY;

  let imgData;
  let fontSize = "100";
  let emojiArray = [];

  //lets put a function on that face 
   function emojiFunc ({emoji}){

    //console.log(emojiList[i]);

    ctxO.clearRect(0, 0, canvasO.width, canvasO.height);
    imgData = [];
    bound = {     
      top: null,
      left: null,
      right: null,
      bottom: null
    };
    
    ctxO.textBaseline = "top"; 
    //ctxO.textBaseline = "middle"; 
    ctxO.textAlign = "center";
    ctxO.font = fontSize+"px serif"; //a font type is needed even though we are using emojis
    ctxO.fillText(emoji, 15+(fontSize/2), 15);

    imgData = ctxO.getImageData(0, 0, 130, 130);

    let imgBase64 = canvasO.toDataURL();
    let img = new Image();
       img.src = imgBase64;

    for (let j = 0; j < imgData.data.length; j += 4) {
      if (imgData.data[j+3] !== 0) {
            
          boundX = (j / 4) % canvasO.width;
          boundY = ~~((j / 4) / canvasO.width);
  
          if (bound.top === null) {
            bound.top = boundY;
          }
      
          if (bound.left === null) {
            bound.left = boundX; 
          } else if (boundX < bound.left) {
            bound.left = boundX;
          }
      
          if (bound.right === null) {
            bound.right = boundX; 
          } else if (bound.right < boundX) {
            bound.right = boundX;
          }
      
          if (bound.bottom === null) {
            bound.bottom = boundY;
          } else if (bound.bottom < boundY) {
            bound.bottom = boundY;
          }
        }
      }

      let trimHeight = bound.bottom - bound.top + 1,
      trimWidth = bound.right - bound.left + 1;

    let emojiInfo = {emoji:emoji,image:img,sx:bound.left,sy:bound.top,sWidth:trimWidth,sHeight:trimHeight};

    emojiArray.push(emojiInfo);

  }

  let emojiList = ["â¤ï¸","ðŸ§¡","ðŸ’›","ðŸ’š","ðŸ’™","ðŸ’œ","ðŸ¤Ž","ðŸ–¤","ðŸ¤","ðŸ’—","ðŸ±","ðŸ˜¼","ðŸ˜¹","ðŸ™€","ðŸ˜¾","ðŸ˜¿","ðŸ˜»","ðŸ˜º","ðŸ˜¸","ðŸ˜½","ðŸ”¥","ðŸ“Ž","ðŸ‘€","ðŸ‘ï¸â€ðŸ—¨ï¸","ðŸŒœ","ðŸ","ðŸ”©","âœï¸","ðŸ’©","ðŸŸª","â¬œ","ðŸŸ¥","â¬›","ðŸŸ¦"];
  for (let i = 0; i < emojiList.length; i++) {
    emojiFunc({emoji:emojiList[i]});
  }
  console.log(emojiArray[20]);

   function drawEmoji({context,emoji,size,dx,dy}){
     let image = emojiArray.find(obj => obj.emoji == emoji).image,
         sx = emojiArray.find(obj => obj.emoji == emoji).sx,
         sy = emojiArray.find(obj => obj.emoji == emoji).sy,
         sWidth = emojiArray.find(obj => obj.emoji == emoji).sWidth,
         sHeight = emojiArray.find(obj => obj.emoji == emoji).sHeight,
         dWidth,
         dHeight;

      let realSize;
      if (sWidth == sHeight){
        dWidth = sWidth - (sWidth - size);
        dHeight = sHeight - (sHeight - size);
      } else if (sWidth > sHeight){
        realSize = sWidth - (sWidth - size);
        dWidth = realSize;
        dHeight = sHeight - realSize;
      } else if (sWidth < sHeight){
        realSize = sHeight - size;
        dHeight = sHeight - realSize;
        dWidth = sWidth - realSize;
        console.log("sHeight",sHeight - size)
      }



      //console.log(sWidth,sHeight)
     // console.log(dWidth,dHeight)
        
    context.drawImage(image, sx, sy,sWidth,sHeight,0+dx,0+dy,dWidth,dHeight);
   }

   //drawEmoji({context:ctx,emoji:"ðŸ”¥",size:100,dx:214,dy:0});
   //drawEmoji({context:ctx,emoji:"ðŸ”¥",size:100,dx:114,dy:0});
   //drawEmoji({context:ctx,emoji:"ðŸ”¥",size:0,dx:0,dy:0});


  let x1 = 0;
  let x2 = 0;
  let state = true ;

  let x3 = -250;
  let x4 = -250;
  let state2 = true 

  function drawIt() { 
    window.requestAnimationFrame(drawIt);
    ctx.clearRect(0,0,canvas.width,canvas.height)

    x1 += 1;
    if (x2 < 100 && state){
      x2 += 1; 
    }

    if (x1 > 100){
       state = false; 
    }

    if (x1 > 250) {
      x2 -=1 ;
    }


    if (x2 > 99) {
      drawEmoji({context:ctx,emoji:"â¬œ",size:100,dx:0,dy:0});
    }

    if (x2 < 100) {
      drawEmoji({context:ctx,emoji:"â¬œ",size:x2,dx:50-(x2/2),dy:50-(x2/2)});
    }
    
    if (x2 < 80) {
      drawEmoji({context:ctx,emoji:"ðŸŸ¦",size:x2,dx:50-(x2/2),dy:50-(x2/2)});
    }

    if (x1 > 250 && x1 < 260 ) {
      drawEmoji({context:ctx,emoji:"ðŸŸ¥",size:x2,dx:50-(x2/2),dy:50-(x2/2)});
    }

    if (x1 > 250 && x1 < 270 ) {
    drawEmoji({context:ctx,emoji:"â¬œ",size:x2,dx:50-(x2/2),dy:50-(x2/2)});
   }

   if (x1 > 270) {
   drawEmoji({context:ctx,emoji:"ðŸŸ¥",size:x2,dx:50-(x2/2),dy:50-(x2/2)});
   }

   for (let i = 0; i < 3; i++) {

    if (x2 > 99) {
      drawEmoji({context:ctx,emoji:"â¬œ",size:100,dx:200-100*i,dy:100*i});
    }

    if (x2 < 100) {
      drawEmoji({context:ctx,emoji:"â¬œ",size:x2,dx:250-(100*i)-(x2/2),dy:50+(100*i)-(x2/2)});
    }
    
    if (x2 < 80) {
      drawEmoji({context:ctx,emoji:"ðŸŸ¦",size:x2,dx:250-(100*i)-(x2/2),dy:50+(100*i)-(x2/2)});
    }

    if (x1 > 250 && x1 < 260 ) {
      drawEmoji({context:ctx,emoji:"ðŸŸ¥",size:x2,dx:250-(100*i)-(x2/2),dy:50+(100*i)-(x2/2)});
    }

    if (x1 > 250 && x1 < 270 ) {
    drawEmoji({context:ctx,emoji:"â¬œ",size:x2,dx:250-(100*i)-(x2/2),dy:50+(100*i)-(x2/2)});
   }

   if (x1 > 270) {
   drawEmoji({context:ctx,emoji:"ðŸŸ¥",size:x2,dx:250-(100*i)-(x2/2),dy:50+(100*i)-(x2/2)});
   }
     
  }

  for (let i = 0; i < 5; i++) {

if (x2 > 99) {
  drawEmoji({context:ctx,emoji:"â¬œ",size:100,dx:400-100*i,dy:100*i});
}

if (x2 < 100) {
  drawEmoji({context:ctx,emoji:"â¬œ",size:x2,dx:400-(100*i),dy:50+(100*i)-(x2/2)});
}

if (x2 < 80) {
  drawEmoji({context:ctx,emoji:"ðŸŸ¦",size:x2,dx:400-(100*i),dy:50+(100*i)-(x2/2)});
}

if (x1 > 250 && x1 < 260 ) {
  drawEmoji({context:ctx,emoji:"ðŸŸ¥",size:x2,dx:400-(100*i),dy:50+(100*i)-(x2/2)});
}

if (x1 > 250 && x1 < 270 ) {
drawEmoji({context:ctx,emoji:"â¬œ",size:x2,dx:400-(100*i),dy:50+(100*i)-(x2/2)});
}

if (x1 > 270) {
drawEmoji({context:ctx,emoji:"ðŸŸ¥",size:x2,dx:400-(100*i),dy:50+(100*i)-(x2/2)});
}

}



  if (x1 > 350) {
    state = true;
    x1 = 0;
    x2 =0;
  } 

    //2
    x3 += 1;
    if (x4 < 100 && state2){
      x4 += 1; 
    }

    if (x3 > 100){
       state2 = false; 
    }

    if (x3 > 250) {
      x4 -=1 ;
    }

    for (let i = 0; i < 2; i++) {

    if (x4 > 99) {
      drawEmoji({context:ctx,emoji:"â¬œ",size:100,dx:100-100*i,dy:100*i});
    }

    if (x4 < 100) {
      drawEmoji({context:ctx,emoji:"â¬œ",size:x4,dx:150-(100*i)-(x4/2),dy:50+(100*i)-(x4/2)});
    }
    
    if (x4 < 80) {
      drawEmoji({context:ctx,emoji:"ðŸŸ¦",size:x4,dx:150-(100*i)-(x4/2),dy:50+(100*i)-(x4/2)});
    }

    if (x3 > 250 && x3 < 260 ) {
      drawEmoji({context:ctx,emoji:"ðŸŸ¥",size:x4,dx:150-(100*i)-(x4/2),dy:50+(100*i)-(x4/2)});
    }

    if (x3 > 250 && x3 < 270 ) {
    drawEmoji({context:ctx,emoji:"â¬œ",size:x4,dx:150-(100*i)-(x4/2),dy:50+(100*i)-(x4/2)});
   }

   if (x3 > 270) {
   drawEmoji({context:ctx,emoji:"ðŸŸ¥",size:x4,dx:150-(100*i)-(x4/2),dy:50+(100*i)-(x4/2)});
   }

  }



  
for (let i = 0; i < 4; i++) {

if (x4 > 99) {
  drawEmoji({context:ctx,emoji:"â¬œ",size:100,dx:300-100*i,dy:100*i});
}

if (x4 < 100) {
  drawEmoji({context:ctx,emoji:"â¬œ",size:x4,dx:350-(100*i)-(x4/2),dy:50+(100*i)-(x4/2)});
}

if (x4 < 80) {
  drawEmoji({context:ctx,emoji:"ðŸŸ¦",size:x4,dx:350-(100*i)-(x4/2),dy:50+(100*i)-(x4/2)});
}

if (x3 > 250 && x3 < 260 ) {
  drawEmoji({context:ctx,emoji:"ðŸŸ¥",size:x4,dx:350-(100*i)-(x4/2),dy:50+(100*i)-(x4/2)});
}

if (x3 > 250 && x3 < 270 ) {
drawEmoji({context:ctx,emoji:"â¬œ",size:x4,dx:350-(100*i)-(x4/2),dy:50+(100*i)-(x4/2)});
}

if (x3 > 270) {
drawEmoji({context:ctx,emoji:"ðŸŸ¥",size:x4,dx:350-(100*i)-(x4/2),dy:50+(100*i)-(x4/2)});
}

}

//right side

for (let i = 0; i < 5; i++) {

if (x4 > 99) {
  drawEmoji({context:ctx,emoji:"â¬œ",size:100,dx:500+100*i,dy:100*i});
}

if (x4 < 100) {
  drawEmoji({context:ctx,emoji:"â¬œ",size:x4,dx:600+(100*i)-(x4),dy:50+(100*i)-(x4/2)});
}

if (x4 < 80) {
  drawEmoji({context:ctx,emoji:"ðŸŸ¦",size:x4,dx:600+(100*i)-(x4),dy:50+(100*i)-(x4/2)});
}

if (x3 > 250 && x3 < 260 ) {
  drawEmoji({context:ctx,emoji:"ðŸŸ¥",size:x4,dx:600+(100*i)-(x4),dy:50+(100*i)-(x4/2)});
}

if (x3 > 250 && x3 < 270 ) {
drawEmoji({context:ctx,emoji:"â¬œ",size:x4,dx:600+(100*i)-(x4),dy:50+(100*i)-(x4/2)});
}

if (x3 > 270) {
drawEmoji({context:ctx,emoji:"ðŸŸ¥",size:x4,dx:600+(100*i)-(x4),dy:50+(100*i)-(x4/2)});
}

}



  if (x3 > 350) {
    state2 = true;
    x3 = 0;
    x4 =0;
  } 

    //drawEmoji({context:ctx,emoji:"â¬›",size:100,dx:0,dy:0});
    //drawEmoji({context:ctx,emoji:"â¬œ",size:100,dx:100,dy:0});

  }
drawIt();


</script>
</body>
</html>